import{y as o,A as i}from"./index-DxDzG57y.js";import{r as s}from"./request-DgRmyeOZ.js";const m=o("user",()=>{let l=localStorage.getItem("user");l=l?JSON.parse(l):null;const e=i({id:l?.userId??null,token:l?.token??null,username:"",email:"",profile:{},itemsSelling:[],bidsPlaced:[]}),t=()=>!e.id||!e.token?Promise.resolve():s.get(`/users/${e.id}/profile`,{headers:{"auction-token":e.token}}).then(r=>{e.username=r.username,e.email=r.email,e.profile=r.profile,e.itemsSelling=r.itemsSelling,e.bidsPlaced=r.bidsPlaced});return t(),{user:e,fetchProfile:t,logout:()=>{e.id=null,e.token=null,e.username="",e.email="",e.profile={},e.itemsSelling=[],e.bidsPlaced=[],localStorage.removeItem("user")}}});export{m as u};
