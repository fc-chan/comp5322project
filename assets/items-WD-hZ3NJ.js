import{x as f,r as l,p as n}from"./index-DfyRTdXA.js";import{r as p}from"./request-CZ4xFZI6.js";import{u as I}from"./user-Bir4zp4M.js";const g=f("items",()=>{let t=l([]);async function a(){const s=await p.get("/items/available");t.value=s}const i=4320*60*1e3,u=n(()=>{const s=Date.now();return t.value.filter(e=>{if(!e?.auctionEnd)return!1;const r=e.auctionEnd instanceof Date?e.auctionEnd:new Date(e.auctionEnd);if(Number.isNaN(r.getTime()))return!1;const o=r.getTime()-s;return o>0&&o<=i})}),c=n(()=>[...t.value].sort(()=>Math.random()-.5).slice(0,6)),m=I(),d=n(()=>{const s=m.user.bidsPlaced.map(e=>e.itemId);return t.value.filter(e=>s.includes(e.id))});return{items:t,endingSoonItems:u,randomItems:c,itemsBidByUser:d,fetchItems:a}});export{g as u};
