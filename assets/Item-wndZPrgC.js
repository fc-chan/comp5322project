import{_ as x,r as D,q as i,o as T,s as N,v as S,i as m,d as c,e,t as o,x as B,E as d,j as $,n as C,c as E,w as y,b,g as h,h as M}from"./index-CVwAxhXS.js";import{u as V}from"./user-vsJKJ1an.js";/* empty css                                                                  */import{r as k}from"./request-DxDOYZdA.js";const P={class:"countdown"},U={class:"block"},A={class:"num"},G={class:"block"},H={class:"num"},R={class:"block"},j={class:"num"},q={class:"block"},F={class:"num"},L={__name:"Countdown",props:{endTime:{type:[String,Number,Date],required:!0}},setup(I){const p=I,r=D(Date.now());let v=null;const t=i(()=>new Date(p.endTime).getTime()),l=i(()=>Math.max(0,t.value-r.value)),f=i(()=>Math.floor(l.value/(1e3*60*60*24))),g=i(()=>Math.floor(l.value/(1e3*60*60)%24)),n=i(()=>Math.floor(l.value/(1e3*60)%60)),a=i(()=>Math.floor(l.value/1e3%60));function u(_){return _.toString().padStart(2,"0")}return T(()=>{v=setInterval(()=>{r.value=Date.now()},1e3)}),N(()=>{v&&clearInterval(v)}),S(()=>p.endTime,()=>{r.value=Date.now()}),(_,s)=>(c(),m("div",P,[e("div",U,[e("div",A,o(u(f.value)),1),s[0]||(s[0]=e("div",{class:"label"},"DAYS",-1))]),s[4]||(s[4]=e("div",{class:"divider"},null,-1)),e("div",G,[e("div",H,o(u(g.value)),1),s[1]||(s[1]=e("div",{class:"label"},"HOURS",-1))]),s[5]||(s[5]=e("div",{class:"divider"},null,-1)),e("div",R,[e("div",j,o(u(n.value)),1),s[2]||(s[2]=e("div",{class:"label"},"MINUTES",-1))]),s[6]||(s[6]=e("div",{class:"divider"},null,-1)),e("div",q,[e("div",F,o(u(a.value)),1),s[3]||(s[3]=e("div",{class:"label"},"SECONDS",-1))])]))}},O=x(L,[["__scopeId","data-v-cb3b2f25"]]),z={style:{display:"flex","justify-content":"center"}},Y={key:0,style:{margin:"50px"}},J={class:"image-wrapper"},K=["src"],Q={style:{margin:"50px"}},W={key:0},X={key:1},Z={style:{margin:"20px",display:"flex","justify-content":"center"}},ee={__name:"Item",setup(I){const p=B(),r=V(),v=i(()=>p.params.id?.toString()??""),t=D(null),l=D(null);T(async()=>{try{const n=await k.get(`/items/${v.value}`);t.value=Array.isArray(n)?n[0]:n,t.value&&t.value.status!=="BIDDING"&&d.warning("This auction is no longer active. This page is for reference only.")}catch{d.error("Failed to load item")}});const f=n=>{const a=new Date(n);return isNaN(a.getTime())?"Invalid date":a.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};function g(){if(!t.value||t.value.status!=="BIDDING"){d.warning("This auction is no longer active. This page is for reference only.");return}if(!l.value){d.error("Please enter your bid amount");return}const n={bidderId:r.user.id,bidAmount:l.value};k.post(`/items/${t.value.id}/bid`,n,{headers:{"auction-token":r.user.token}}).then(()=>{d.success("Bid placed successfully!")}).catch(()=>{d.error("Failed to place bid, try again")})}return(n,a)=>{const u=b("el-input-number"),_=b("el-button"),s=b("el-card");return c(),m("div",z,[t.value?(c(),m("div",Y,[e("div",null,[e("h1",null,o(t.value.title),1),e("p",null,o(t.value.description),1)]),e("div",J,[e("span",{class:C(["status-badge",t.value.status.toLowerCase()])},o(t.value.status),3),e("img",{src:`data:${t.value.imageContentType};base64,${t.value.imageData}`,class:"item-image"},null,8,K)])])):$("",!0),e("div",Q,[t.value?(c(),E(s,{key:0,style:{border:"1px solid rgb(245,245,246)"}},{default:y(()=>[e("div",null,[e("p",null,o(f(t.value.auctionEndHkt)),1)]),e("div",null,[h(O,{endTime:t.value.auctionEndHkt},null,8,["endTime"])]),e("div",null,[a[2]||(a[2]=e("p",null,"STARTING PRICE",-1)),t.value.currentHighestBid==null?(c(),m("h2",W,"$"+o(t.value.startingPrice),1)):(c(),m("h2",X,"$"+o(t.value.currentHighestBid),1))]),e("div",Z,[h(u,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=w=>l.value=w),min:t.value.startingPrice,step:1,placeholder:"Please input your bid amount",style:{width:"300px"},disabled:t.value.status!=="BIDDING"},{prefix:y(()=>[...a[3]||(a[3]=[e("span",null,"$",-1)])]),_:1},8,["modelValue","min","disabled"])]),e("div",null,[h(_,{type:"danger",plain:"",onClick:a[1]||(a[1]=w=>g()),disabled:t.value.status!=="BIDDING"},{default:y(()=>[...a[4]||(a[4]=[M(" Place Bid ",-1)])]),_:1},8,["disabled"])])]),_:1})):$("",!0)])])}}},oe=x(ee,[["__scopeId","data-v-fcd82ba2"]]);export{oe as default};
